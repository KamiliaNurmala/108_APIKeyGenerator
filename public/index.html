<!DOCTYPE html>
<html lang="id">
    <head>
        <title>User Registration</title>
        <style>
            body { font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; background: #f0f2f5; }
            .card { background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); width: 350px; }
            input { width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box; }
            button { width: 100%; padding: 10px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }
            button:hover { background: #0056b3; }
            .result { margin-top: 20px; padding: 10px; background: #e8f5e9; border: 1px solid #c8e6c9; border-radius: 5px; display: none; word-break: break-all; }
        </style>
    </head>
    <body>
        <div class="card">
            <h2>Get API Key</h2>
            <input type="text" id="firstname" placeholder="First Name">
            <input type="text" id="lastname" placeholder="Last Name">
            <input type="email" id="email" placeholder="Email Address">
            <button onclick="registerUser()">Generate API Key</button>
            
            <div id="result" class="result"></div>
            <p style="text-align:center; margin-top:15px;"><a href="/admin/login">Admin Login</a></p>
        </div>
    
        <script>
            async function registerUser() {
                const firstname = document.getElementById('firstname').value;
                const lastname = document.getElementById('lastname').value;
                const email = document.getElementById('email').value;
    
                const res = await fetch('/register', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ firstname, lastname, email })
                });
    
                const data = await res.json();
                if (data.success) {
                    const resultDiv = document.getElementById('result');
                    resultDiv.style.display = 'block';
                    resultDiv.innerHTML = `<strong>Success!</strong><br>Your API Key:<br>${data.apiKey}`;
                } else {
                    alert('Error: ' + data.message);
                }
            }
        </script>
    </body>
    </html>